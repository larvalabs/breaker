<!DOCTYPE html>

<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=${_response_encoding}">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        %{
            for(room in rooms) {
        }%
            <link rel="alternate stylesheet" href="https://reddit.com/r/${room.getValue().getName()}/stylesheet.css" type="text/css" disabled="${room.getValue().getName() == roomName}" title="${room.getValue().getName()}"/>
        %{
            }
        }%


        <link rel="stylesheet" href="@{'/public/libs/assets/animate.css/animate.css'}" type="text/css"/>
        <link rel="stylesheet" href="@{'/public/libs/assets/font-awesome/css/font-awesome.min.css'}" type="text/css"/>
        <link rel="stylesheet" href="@{'/public/libs/assets/simple-line-icons/css/simple-line-icons.css'}" type="text/css"/>
        <link rel="stylesheet" href="@{'/public/libs/jquery/bootstrap/dist/css/bootstrap.css'}" type="text/css"/>

        <link rel="stylesheet" href="@{'/public/css/font.css'}" type="text/css"/>
        <link rel="stylesheet" href="@{'/public/css/app.css'}" type="text/css"/>
        <link rel="stylesheet" href="@{'/public/stylesheets/angulr-custom.css'}" type="text/css"/>


        <link href="@{'/public/stylesheets/messenger.css'}" rel="stylesheet" type="text/css" />
        <link href="@{'/public/stylesheets/messenger-theme-flat.css'}" rel="stylesheet" type="text/css" />
        <link href="@{'/public/stylesheets/jquery.mentionsInput.css'}" rel="stylesheet" type="text/css" />
        <link href="@{'/public/stylesheets/screen.css'}" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon.png'}">
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-191940-21', 'auto');
            ga('send', 'pageview');
        </script>
        <script type="text/javascript">

            window.__ENVIRONMENT__ = "${environment}";
            window.__WEBSOCKET_URL__ = "@@{WebSocket.ChatRoomSocket.join()}";
            window.__ROOM_NAME__ = "${roomName}";
            window.__USER_ADMIN__ = "${user.isAdmin()}";
            window.__USER_GUEST__ = "${user.isGuest()}";

            window.__INITIAL_STATE__ = {
                authUser: ${userString.raw()},
                currentRoom: "${roomName}",
                members: ${membersString.raw()},
                rooms: ${roomsString.raw()},
                users: ${usersString.raw()},
                roomMessages: ${roomMessagesString.raw()},
                messages: ${messagesString.raw()},
                bannerMessage: {},
                ui: {},
                unreadCounts: {
                    __HAS_FOCUS__: document.hasFocus(),
                }
            };
        </script>
    </head>
    <body>
        <div id="root">

        </div>
        <script src="@{'/public/libs/jquery/jquery/dist/jquery.js'}" type="text/javascript" charset="${_response_encoding}"></script>
        <script src="@{'/public/libs/jquery/bootstrap/dist/js/bootstrap.js'}"></script>
        <script src="@{'/public/javascripts/reconnecting-websocket.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
        <script src="/dist/bundle.js"></script>
    </body>
</html>
